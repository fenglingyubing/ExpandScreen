构建和测试说明
================

当前环境: Linux (可执行dotnet restore/build/test；Windows驱动仍需Windows+WDK)

任务2.1.6构建要求:
- .NET 8.0 SDK
- Windows/Linux/macOS (跨平台)
- 无特殊依赖

构建状态:
✅ 代码已完成并提交
✅ 协议层为纯C#代码，跨平台兼容
⚠️  需要在Windows环境下进行完整集成测试

测试计划:
1. 单元测试（Linux环境可执行）:
   - dotnet test ExpandScreen.sln
   - 测试消息序列化/反序列化
   - 测试Sender-Receiver通信
   - 测试握手流程

2. 集成测试（Windows环境）:
   - 与UsbConnection集成测试
   - 与Android客户端通信测试
   - 性能测试（延迟、吞吐量）

预期结果:
- 消息序列化/反序列化正确
- TCP收发正常工作
- 握手协议成功
- 心跳机制正常
- 无内存泄漏

实际测试将在后续Windows环境中进行。

---

任务2.1.8构建要求:
- .NET 8.0 SDK
- Windows 10/11（用于完整集成测试）
- xUnit测试框架
- 依赖于所有前序任务的模块

构建状态:
✅ 集成测试代码已完成并提交
✅ 5个端到端测试用例已实现
✅ 性能监控工具已完成
⚠️  需要在Windows环境下运行完整测试

测试计划:
1. 单元测试（Linux环境可执行部分）:
   - 协议层测试（跨平台）
   - 网络传输测试
   - 性能监控工具测试

2. 集成测试（Windows环境必需）:
   - 捕获→编码→网络发送管道测试
   - 端到端性能测试
   - 虚拟显示驱动集成测试
   - 真实Android设备连接测试

预期结果:
- 所有模块成功集成
- 端到端延迟 < 200ms（基础版本）
- 平均FPS >= 30
- CPU占用 < 30%
- 无内存泄漏
- 所有测试用例通过

实际测试将在Windows环境中进行。

---

任务2.2.2构建要求:
- JDK 17
- Android SDK (platforms;android-34, build-tools;34.0.0, platform-tools)
- Gradle Wrapper（`android-client/gradlew`）
- .NET 8.0 SDK（用于Windows端协议/集成测试的跨平台部分）

构建/测试状态:
✅ Android客户端网络接收模块已完成并提交

关键命令与输出（本地Linux）:
1. .NET（跨平台可跑的部分）:
   - `dotnet test ExpandScreen.sln -c Release -p:EnableWindowsTargeting=true`
   - 结果：Passed 18 (Skipped 9), Failed 0

2. Android（单元测试）:
   - `cd android-client && ./gradlew :app:testDebugUnitTest`
   - 结果：BUILD SUCCESSFUL

说明:
- Android SDK 通过 `android-client/local.properties` 指定 `sdk.dir`（该文件已在 `android-client/.gitignore` 中忽略）

---

任务2.2.3构建要求:
- JDK 17
- Android SDK (platforms;android-34, build-tools;34.0.0, platform-tools)
- Gradle Wrapper（`android-client/gradlew`）

构建/测试状态:
⚠️ 本地环境缺少 Android SDK 路径，单元测试未能执行

关键命令与输出（本地Linux）:
1. Android（单元测试）:
   - `cd android-client && ./gradlew :app:testDebugUnitTest`
   - 结果：FAILED（原因：未配置 `ANDROID_HOME` 或 `android-client/local.properties` 的 `sdk.dir`）

说明:
- 需要在有 Android SDK 的环境中配置 `sdk.dir` 后重试

---

任务2.2.4构建要求:
- JDK 17+（Gradle 8.x 需要较新JDK）
- Android SDK (platforms;android-34, build-tools;34.0.0, platform-tools)
- Gradle Wrapper（`android-client/gradlew`）

---

任务4.2.4（AND-204）构建/测试（Windows）
日期：2026-01-25

Android：
- 命令：`pushd android-client; $env:JAVA_HOME="F:\\Java\\jdk-21"; $env:Path="$env:JAVA_HOME\\bin;$env:Path"; .\\gradlew.bat :app:testDebugUnitTest :app:assembleDebug --no-daemon; popd`
- 结果：BUILD SUCCESSFUL

.NET：
- 命令：`dotnet test ExpandScreen.sln -c Release`
- 结果：通过 36，跳过 9，失败 0（总计 45）

备注：
- 本地执行 `:app:ktlintCheck` 会因 `android-client/app/build.gradle.kts` 现存格式问题失败（与本任务无关），未作为必需检查项。

---

任务3.2.5构建要求:
- JDK 17+（本地默认 `JAVA_HOME=JDK8` 会导致 Gradle Daemon 启动失败）
- Android SDK (API 34)（用于完整 Android 构建/运行；单元测试使用 Robolectric）
- .NET 8.0 SDK

关键命令与输出（本地 Windows）:
1) .NET（跨平台部分）:
   - `dotnet test ExpandScreen.sln -c Release`
   - 结果：已通过 (Passed 21, Skipped 9, Failed 0)

2) Android（单元测试）:
   - `cd android-client`
   - 使用 JDK 21（等价于 JDK 17+）运行 Gradle:
     - `$env:JAVA_HOME='F:\Java\jdk-21'; $env:ORG_GRADLE_JAVA_HOME=$env:JAVA_HOME; $env:PATH="$env:JAVA_HOME\bin;$env:PATH"; .\gradlew.bat --no-daemon :app:testDebugUnitTest`
   - 结果：BUILD SUCCESSFUL

说明:
- 若直接运行 `.\gradlew.bat :app:testDebugUnitTest`，会因 JDK8 触发 `ClassNotFoundException: org.gradle.instrumentation.agent.Agent` 导致构建失败。

构建/测试状态:
✅ Android OpenGL渲染模块（AND-004）构建与单元测试通过

关键命令与输出（本地Windows）:
1. Android（assemble + 单元测试）:
   - `pushd android-client; $env:JAVA_HOME="F:\\Java\\jdk-21"; $env:Path="$env:JAVA_HOME\\bin;$env:Path"; .\\gradlew.bat :app:assembleDebug :app:testDebugUnitTest --no-daemon; popd`
   - 结果：BUILD SUCCESSFUL（48 tasks, 9m 4s）
2. Android（变更后复跑单元测试）:
   - `pushd android-client; $env:JAVA_HOME="F:\\Java\\jdk-21"; $env:Path="$env:JAVA_HOME\\bin;$env:Path"; .\\gradlew.bat :app:testDebugUnitTest --no-daemon; popd`
   - 结果：BUILD SUCCESSFUL（31 tasks, 41s）

说明:
- 当前环境 `dotnet` SDK 未安装，未执行 `dotnet build/test`（本任务改动仅涉及 `android-client/`）。

---

任务2.2.5构建要求:
- JDK 17+（Gradle 8.x 需要较新JDK）
- Android SDK (platforms;android-34, build-tools;34.0.0, platform-tools)
- Gradle Wrapper（`android-client/gradlew`）

构建/测试状态:
✅ Android 显示Activity开发（AND-005）构建与单元测试通过

关键命令与输出（本地Windows）:
1. Android（assemble + 单元测试）:
   - `pushd android-client; $env:JAVA_HOME="F:\\Java\\jdk-21"; $env:Path="$env:JAVA_HOME\\bin;$env:Path"; .\\gradlew.bat :app:assembleDebug :app:testDebugUnitTest --no-daemon; popd`
   - 结果：BUILD SUCCESSFUL（48 tasks, 1m 19s）

说明:
- 编译期提示：`MediaCodec.INFO_OUTPUT_BUFFERS_CHANGED` 相关 API 为 deprecated（不影响构建/测试通过）。

---

任务2.2.6构建要求:
- JDK 17+（Gradle 8.x 需要较新JDK）
- Android SDK (platforms;android-34, build-tools;34.0.0, platform-tools)
- Gradle Wrapper（`android-client/gradlew`）

构建/测试状态:
✅ Android 主界面开发（AND-006）构建与单元测试通过

关键命令与输出（本地Windows）:
1. Android（assemble + 单元测试）:
   - `pushd android-client; $env:JAVA_HOME="F:\\Java\\jdk-21"; $env:Path="$env:JAVA_HOME\\bin;$env:Path"; .\\gradlew.bat :app:assembleDebug :app:testDebugUnitTest --no-daemon; popd`
   - 结果：BUILD SUCCESSFUL in 1m 9s（48 actionable tasks）
2. Android（变更后复跑单元测试）:
   - `pushd android-client; $env:JAVA_HOME="F:\\Java\\jdk-21"; $env:Path="$env:JAVA_HOME\\bin;$env:Path"; .\\gradlew.bat :app:testDebugUnitTest --no-daemon; popd`
   - 结果：BUILD SUCCESSFUL in 44s（31 actionable tasks）

说明:
- 编译期提示：`MediaCodec.INFO_OUTPUT_BUFFERS_CHANGED` 相关 API 为 deprecated（不影响构建/测试通过）。

---

任务2.2.7构建要求:
- JDK 17+（Gradle 8.x 需要较新JDK）
- Android SDK (platforms;android-34, build-tools;34.0.0, platform-tools)
- Gradle Wrapper（`android-client/gradlew`）

构建/测试状态:
✅ Android 后台服务开发（AND-007）构建与单元测试通过

关键命令与输出（本地Windows）:
1. Android（assemble + 单元测试）:
   - `pushd android-client; $env:JAVA_HOME="F:\\Java\\jdk-21"; $env:Path="$env:JAVA_HOME\\bin;$env:Path"; .\\gradlew.bat :app:assembleDebug :app:testDebugUnitTest --no-daemon; popd`
   - 结果：BUILD SUCCESSFUL in 1m 27s（48 actionable tasks）
2. Android（变更后复跑单元测试）:
   - `pushd android-client; $env:JAVA_HOME="F:\\Java\\jdk-21"; $env:Path="$env:JAVA_HOME\\bin;$env:Path"; .\\gradlew.bat :app:testDebugUnitTest --no-daemon; popd`
   - 结果：BUILD SUCCESSFUL in 42s（31 actionable tasks）

说明:
- 使用 JDK 8 会导致 Gradle 8.2 启动失败，本任务固定使用 JDK 21 执行构建与测试。

---

任务2.2.8构建要求:
- JDK 17+（Gradle 8.x 需要较新JDK）
- Android SDK (platforms;android-34, build-tools;34.0.0, platform-tools)
- Gradle Wrapper（`android-client/gradlew`）

---

任务3.2.4构建要求:
- JDK 17+（Gradle 8.x 需要较新JDK）
- Android SDK (platforms;android-34, build-tools;34.0.0, platform-tools)
- Gradle Wrapper（`android-client/gradlew`）

构建/测试状态:
✅ AND-104（Android 设置功能）构建与单元测试通过

关键命令与输出（本地Windows）:
1. Android（assemble + 单元测试）:
   - `pushd android-client; $env:JAVA_HOME="F:\\Java\\jdk-21"; $env:Path="$env:JAVA_HOME\\bin;$env:Path"; .\\gradlew.bat :app:assembleDebug :app:testDebugUnitTest --no-daemon; popd`
   - 结果：`BUILD SUCCESSFUL in 1m 58s`（48 actionable tasks: 48 executed）

备注:
- 若默认 `JAVA_HOME` 指向 JDK 8，会导致 Gradle 8 daemon 启动失败；本任务固定使用 JDK 21 执行构建/测试
- 编译期 warning（不影响通过）：
  - `VideoDecoder.kt`：`MediaCodec.INFO_OUTPUT_BUFFERS_CHANGED` deprecated
  - `WifiDiscoveryClient.kt`：`dhcpInfo` deprecated

---

任务3.1.2构建要求:
- .NET 8.0 SDK
- FFmpeg native binaries（仅影响硬编/视频编码相关测试；无FFmpeg native 时相关测试会 Skip）

构建/测试状态:
✅ Windows端硬件编码支持（WIN-102）已完成并通过基础构建/测试

关键命令与输出（本地Windows）:
1. .NET（Core 编译）:
   - `dotnet build src/ExpandScreen.Core/ExpandScreen.Core.csproj -c Release`
   - 结果：Build succeeded（0 warnings, 0 errors）

2. .NET（集成测试）:
   - `dotnet test src/ExpandScreen.IntegrationTests/ExpandScreen.IntegrationTests.csproj -c Release`
   - 结果：Passed 11, Skipped 9, Failed 0

说明:
- 跳过的测试为 “Requires FFmpeg native binaries …” 标注的用例（需要 runner 上提供 FFmpeg DLL）。

构建/测试状态:
✅ Android 集成测试和调试（AND-008）构建与单元测试通过

关键命令与输出（本地Windows）:
1. Android（assemble + 单元测试）:
   - `pushd android-client; $env:JAVA_HOME="F:\\Java\\jdk-21"; $env:Path="$env:JAVA_HOME\\bin;$env:Path"; .\\gradlew.bat :app:assembleDebug :app:testDebugUnitTest --no-daemon; popd`
   - 结果：BUILD SUCCESSFUL in 29s（48 actionable tasks: 7 executed, 41 up-to-date）

说明:
- 任务新增了 socket 端到端单测（Handshake/Heartbeat/VideoFrame），需在有可用本地端口的环境运行。

---

任务3.1.1构建要求:
- .NET 8.0 SDK
- Windows 10/11（本地TCP/UDP回环测试）

构建/测试状态:
✅ WIN-101（WiFi连接实现）相关代码已完成
✅ .NET 构建与测试通过

关键命令与输出（本地Windows）:
1. 安装 .NET 8 SDK:
   - `winget install --id Microsoft.DotNet.SDK.8 --source winget --accept-package-agreements --accept-source-agreements --silent`
   - `dotnet --info` 显示 SDK: 8.0.417
2. .NET（解决方案测试）:
   - `dotnet test ExpandScreen.sln -c Release`
   - 结果：Passed 11, Skipped 9, Failed 0

说明:
- 构建过程中存在历史代码的编译告警（CS1998/CS8602/CS8625），不影响本任务测试通过。

---

任务3.1.3构建要求:
- .NET 8.0 SDK
- Windows 10/11（Touch Injection API 仅Windows；测试为本地Loopback + 纯逻辑验证）

构建/测试状态:
✅ WIN-103（触控事件注入）相关代码已完成
✅ .NET 构建与测试通过

关键命令与输出（本地Windows）:
1. .NET（解决方案测试）:
   - `dotnet test ExpandScreen.sln -c Release`
   - 结果：Passed 15, Skipped 9, Failed 0

说明:
- Skip 的用例为 “Requires FFmpeg native binaries …”/端到端性能类测试（依赖环境/设备）。

---

任务3.1.4构建要求:
- .NET 8.0 SDK
- Windows 10/11（WPF UI + 更新窗口）

构建/测试状态:
✅ WIN-204（自动更新）相关代码已完成
✅ .NET 构建与测试通过

关键命令与输出（本地Windows）:
1. .NET（解决方案测试）:
  - `dotnet test ExpandScreen.sln -c Release`
  - 结果：Passed 18, Skipped 9, Failed 0

说明:
- 构建过程中存在历史代码的编译告警（CS1998/CS8602/CS8625/CS8603），不影响本任务测试通过。

---

任务3.1.5构建要求:
- .NET 8.0 SDK
- Windows 10/11（WPF 设置页 + 配置服务）

构建/测试状态:
✅ WIN-105（配置管理）相关代码已完成
✅ .NET 构建与测试通过

关键命令与输出（本地Windows）:
1. .NET（解决方案测试）:
  - `dotnet test ExpandScreen.sln -c Release`
  - 结果：Passed 21, Skipped 9, Failed 0

说明:
- 构建过程中存在历史代码的编译告警（CS1998/CS8602/CS8625），不影响本任务测试通过。

---

任务3.1.6构建要求:
- .NET 8.0 SDK
- Windows 10/11（日志/诊断 + WPF 设置页“关于”新增诊断入口）

构建/测试状态:
✅ WIN-106（日志和诊断）相关代码已完成
✅ .NET 构建与测试通过

关键命令与输出（本地Windows）:
1. .NET（解决方案测试）:
  - `dotnet test ExpandScreen.sln -c Release`
  - 结果：Passed 21, Skipped 9, Failed 0

说明:
- 构建过程中存在历史代码的编译告警（CS1998/CS8602/CS8625），不影响本任务测试通过。

---

任务3.2.1构建要求:
- JDK 17+（Gradle 8.x 需要较新JDK；本地默认 JDK8 会导致 Gradle 8.2 无法启动）
- Android SDK (platforms;android-34, build-tools;34.0.0, platform-tools)
- Gradle Wrapper（`android-client/gradlew`）
- .NET 8.0 SDK（用于 Windows 端协议/集成测试的跨平台部分）

构建/测试状态:
✅ AND-101（Android WiFi 连接/发现）相关代码已完成
✅ Android 单元测试通过
✅ .NET 构建与测试通过

关键命令与输出（本地Windows）:
1. Android（单元测试）:
  - `pushd android-client; $env:JAVA_HOME="F:\\Java\\jdk-21"; $env:Path="$env:JAVA_HOME\\bin;$env:Path"; .\\gradlew.bat test --no-daemon; popd`
  - 结果：BUILD SUCCESSFUL（62 actionable tasks, 1m 38s）
2. .NET（解决方案测试）:
  - `dotnet test ExpandScreen.sln -c Release`
  - 结果：Passed 21, Skipped 9, Failed 0

说明:
- Android 编译期提示 `DhcpInfo` 等 API deprecated（不影响构建/测试通过）。
- Skip 的用例多为依赖 FFmpeg native/设备环境的测试（不影响本任务提交）。

---

任务3.2.3构建要求:
- JDK 17+（Gradle 8.x 需要较新JDK；本地默认 JDK8 会导致 Gradle 8.2 无法启动）
- Android SDK (platforms;android-34, build-tools;34.0.0, platform-tools)
- Gradle Wrapper（`android-client/gradlew`）
- .NET 8.0 SDK（用于仓库内 .NET 侧回归）

构建/测试状态:
✅ AND-103（Android 性能优化）相关代码已完成
✅ Android 构建与单元测试通过
✅ .NET 构建与测试通过

关键命令与输出（本地Windows）:
1. Android（assemble + 单元测试）:
  - `pushd android-client; $env:JAVA_HOME="F:\\Java\\jdk-21"; $env:Path="$env:JAVA_HOME\\bin;$env:Path"; .\\gradlew.bat :app:assembleDebug :app:testDebugUnitTest --no-daemon; popd`
  - 结果：BUILD SUCCESSFUL（48 actionable tasks, 1m 43s）
2. .NET（解决方案测试）:
  - `dotnet test ExpandScreen.sln -c Release`
  - 结果：Passed 21, Skipped 9, Failed 0

说明:
- Android 编译期提示 `INFO_OUTPUT_BUFFERS_CHANGED` / `DhcpInfo` 等 API deprecated（不影响构建/测试通过）。
- .NET 构建过程中存在历史代码的编译告警（CS1998/CS8602/CS8625 等），不影响本任务测试通过。

---

任务3.2.6构建要求:
- JDK 17+（AGP 8.2.x 运行要求；本次使用 `F:\\Java\\jdk-21`）
- Android SDK (platforms;android-34, build-tools;34.0.0, platform-tools)
- Gradle Wrapper（`android-client/gradlew`）
- .NET 8.0 SDK（用于仓库内 .NET 侧回归）

构建/测试状态:
✅ AND-106（Android UI 完善）相关代码已完成
✅ Android assembleDebug + 单元测试通过
✅ .NET 构建与测试通过

关键命令与输出（本地Windows）:
1. Android（assemble + 单元测试）:
  - `pushd android-client; $env:JAVA_HOME="F:\\Java\\jdk-21"; $env:Path="$env:JAVA_HOME\\bin;$env:Path"; .\\gradlew.bat :app:assembleDebug :app:testDebugUnitTest --no-daemon; popd`
  - 结果：BUILD SUCCESSFUL（50 actionable tasks, 1m 26s）
2. .NET（解决方案测试）:
  - `dotnet test ExpandScreen.sln -c Release`
  - 结果：Passed 21, Skipped 9, Failed 0

说明:
- Android 编译期提示 `INFO_OUTPUT_BUFFERS_CHANGED` / `DhcpInfo` 等 API deprecated（不影响构建/测试通过）。
- .NET 构建过程中存在历史代码的编译告警（CS1998/CS8602/CS8625 等），不影响本任务测试通过。

---

任务4.2.1构建要求:
- JDK 17+（AGP 8.2.x 运行要求；本次使用 `F:\\Java\\jdk-21`）
- Android SDK (platforms;android-34, build-tools;34.0.0, platform-tools)
- Gradle Wrapper（`android-client/gradlew`）
- .NET 8.0 SDK（用于仓库内 .NET 侧回归）

构建/测试状态:
✅ AND-201（音频播放）相关代码已完成
✅ Android 单元测试通过
✅ .NET 构建与测试通过

关键命令与输出（本地 Windows）:
1. Android（单元测试）:
  - `pushd android-client; $env:JAVA_HOME="F:\\Java\\jdk-21"; $env:Path="$env:JAVA_HOME\\bin;$env:Path"; .\\gradlew.bat :app:testDebugUnitTest --no-daemon; popd`
  - 结果：BUILD SUCCESSFUL（35 actionable tasks, 1m 46s）
2. .NET（解决方案测试）:
  - `dotnet test ExpandScreen.sln -c Release`
  - 结果：Passed 36, Skipped 9, Failed 0

说明:
- Android 编译期提示 `INFO_OUTPUT_BUFFERS_CHANGED` / `DhcpInfo` 等 API deprecated（不影响构建/测试通过）。
- .NET 构建过程中存在历史代码的编译告警（CS1998/CS8602/CS8625 等），不影响本任务测试通过。

---

任务4.2.2构建要求:
- JDK 17+（AGP 8.2.x 运行要求；本次使用 `F:\\Java\\jdk-21`）
- Android SDK (platforms;android-34, build-tools;34.0.0, platform-tools)
- Gradle Wrapper（`android-client/gradlew`）
- .NET 8.0 SDK（用于仓库内 .NET 侧回归）

构建/测试状态:
✅ AND-202（二维码连接）相关代码已完成
✅ Android 单元测试通过
✅ .NET 构建与测试通过

关键命令与输出（本地 Windows）:
1. Android（单元测试）:
  - `pushd android-client; $env:JAVA_HOME="F:\\Java\\jdk-21"; $env:Path="$env:JAVA_HOME\\bin;$env:Path"; .\\gradlew.bat :app:testDebugUnitTest --no-daemon; popd`
  - 结果：BUILD SUCCESSFUL（35 actionable tasks, 42s）
2. .NET（解决方案测试）:
  - `dotnet test ExpandScreen.sln -c Release`
  - 结果：Passed 36, Skipped 9, Failed 0

说明:
- 若环境存在 `~/.gradle/gradle.properties` 的本地代理（如 `127.0.0.1:7897`），会导致依赖下载失败；本次通过禁用 proxy 解决。

---

任务4.1.1构建要求:
- .NET 8.0 SDK
- Windows 10/11（WPF + 驱动 IOCTL 接口；测试可跨平台跑除驱动依赖部分）

构建/测试状态:
✅ WIN-201（多设备支持）相关代码已完成
✅ .NET 构建与测试通过

关键命令与输出（本地 Windows）:
1. .NET（解决方案测试）:
  - `dotnet test ExpandScreen.sln -c Release`
  - 结果：Passed 24, Skipped 9, Failed 0

说明:
- 构建过程中存在历史代码的编译告警（CS1998/CS8602/CS8625 等），不影响本任务测试通过。

---

任务4.1.3构建要求:
- .NET 8.0 SDK
- Windows 10/11（WPF 全局快捷键 RegisterHotKey；测试为 .NET 集成测试）

构建/测试状态:
✅ WIN-203（快捷键支持）相关代码已完成
✅ .NET 构建与测试通过

关键命令与输出（本地 Windows）:
1. .NET（解决方案测试）:
  - `dotnet test ExpandScreen.sln -c Release`
  - 结果：Passed 36, Skipped 9, Failed 0

说明:
- 构建过程中存在历史代码的编译告警（CS1998/CS8602/CS8625 等），不影响本任务测试通过。

---

任务4.2.5构建要求:
- JDK 17+（AGP 8.2.x 运行要求；本次使用 `F:\\Java\\jdk-21`）
- Android SDK (platforms;android-34, build-tools;34.0.0, platform-tools)
- Gradle Wrapper（`android-client/gradlew`）
- .NET 8.0 SDK（用于仓库内 .NET 侧回归）

构建/测试状态:
✅ AND-205（通知优化）相关代码已完成
✅ Android 单元测试与 Debug 包构建通过
✅ .NET 构建与测试通过

关键命令与输出（本地 Windows）:
1. Android（单元测试 + Debug 构建）:
  - `pushd android-client; $env:JAVA_HOME="F:\\Java\\jdk-21"; $env:Path="$env:JAVA_HOME\\bin;$env:Path"; .\\gradlew.bat :app:testDebugUnitTest :app:assembleDebug --no-daemon; popd`
  - 结果：BUILD SUCCESSFUL（52 actionable tasks, 1m 55s）
2. .NET（解决方案测试）:
  - `dotnet test ExpandScreen.sln -c Release`
  - 结果：通过 36，跳过 9，失败 0

说明:
- Android 编译期存在部分 deprecated API 警告（不影响构建/测试通过）。
- .NET 构建过程中存在历史代码的编译告警（CS1998/CS8602/CS8625 等），不影响本任务测试通过。

---

任务4.3.2构建要求:
- .NET 8.0 SDK

构建/测试状态:
✅ BOTH-302（协议优化）相关代码已完成
✅ .NET 构建与测试通过

关键命令与输出（本地 Windows）:
1. .NET（解决方案测试）:
  - `dotnet test ExpandScreen.sln -c Release`
  - 结果：通过 42，跳过 9，失败 0

说明:
- 构建过程中存在历史代码的编译告警（CS8602/CS8625/xUnit1031 等），不影响本任务测试通过。

---

任务5.1.1（TEST-001 功能测试）构建/测试（Windows）
日期：2026-01-26

.NET：
- 命令：`dotnet test ExpandScreen.sln -c Release`
- 结果：通过 46，跳过 9，失败 0（总计 55）

说明：
- 新增 USB/ADB 功能测试使用 Fake ADB runner + Loopback TCP，不依赖真实 `adb.exe` / 真实 Android 设备。

---

之前任务构建要求:

任务2.1.2构建要求:
- Windows Driver Kit (WDK) 10
- Visual Studio 2022
- .NET 6.0 SDK
- Windows 10/11操作系统

任务2.1.3-2.1.5构建要求:
- .NET 8.0 SDK
- Visual Studio 2022或VS Code
- 相关NuGet包会自动恢复
