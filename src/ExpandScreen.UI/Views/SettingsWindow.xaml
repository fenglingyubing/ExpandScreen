<Window x:Class="ExpandScreen.UI.Views.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="设置"
        Height="500"
        Width="600"
        MinHeight="400"
        MinWidth="500"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        ResizeMode="CanResize"
        WindowStartupLocation="CenterOwner">

    <Border Background="{DynamicResource BackgroundBrush}"
            CornerRadius="12"
            Margin="8">
        <Border.Effect>
            <DropShadowEffect Color="Black" BlurRadius="20" ShadowDepth="0" Opacity="0.4"/>
        </Border.Effect>

        <Grid>
            <Grid.RowDefinitions>
                <!-- Title Bar -->
                <RowDefinition Height="48"/>
                <!-- Content -->
                <RowDefinition Height="*"/>
                <!-- Button Bar -->
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Title Bar -->
            <Border Grid.Row="0"
                    Background="{DynamicResource SurfaceBrush}"
                    BorderBrush="{DynamicResource BorderBrush}"
                    BorderThickness="0,0,0,1"
                    CornerRadius="12,12,0,0"
                    MouseLeftButtonDown="TitleBar_MouseLeftButtonDown">
                <Grid>
                    <TextBlock Text="设置"
                              FontFamily="{DynamicResource UIFont}"
                              FontSize="16"
                              FontWeight="SemiBold"
                              Foreground="{DynamicResource TextPrimaryBrush}"
                              VerticalAlignment="Center"
                              Margin="20,0"/>

                    <Button Style="{DynamicResource IconButtonStyle}"
                           Click="CloseButton_Click"
                           HorizontalAlignment="Right"
                           Margin="0,0,8,0"
                           ToolTip="关闭">
                        <TextBlock Text="✕" FontSize="14"/>
                    </Button>
                </Grid>
            </Border>

            <!-- Settings Content -->
            <ScrollViewer Grid.Row="1" Margin="24" VerticalScrollBarVisibility="Auto">
                <StackPanel Spacing="24">

                    <!-- General Settings -->
                    <Border Style="{DynamicResource CardStyle}">
                        <StackPanel>
                            <TextBlock Text="常规"
                                      FontFamily="{DynamicResource UIFont}"
                                      FontSize="16"
                                      FontWeight="SemiBold"
                                      Foreground="{DynamicResource TextPrimaryBrush}"
                                      Margin="0,0,0,16"/>

                            <Grid Margin="0,0,0,12">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>

                                <StackPanel Grid.Column="0">
                                    <TextBlock Text="开机自启动"
                                              FontFamily="{DynamicResource UIFont}"
                                              FontSize="14"
                                              Foreground="{DynamicResource TextPrimaryBrush}"/>
                                    <TextBlock Text="Windows启动时自动运行ExpandScreen"
                                              FontFamily="{DynamicResource UIFont}"
                                              FontSize="12"
                                              Foreground="{DynamicResource TextSecondaryBrush}"
                                              Margin="0,4,0,0"/>
                                </StackPanel>

                                <CheckBox Grid.Column="1"
                                         VerticalAlignment="Center"
                                         IsChecked="False"/>
                            </Grid>

                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>

                                <StackPanel Grid.Column="0">
                                    <TextBlock Text="最小化到托盘"
                                              FontFamily="{DynamicResource UIFont}"
                                              FontSize="14"
                                              Foreground="{DynamicResource TextPrimaryBrush}"/>
                                    <TextBlock Text="关闭窗口时最小化到系统托盘"
                                              FontFamily="{DynamicResource UIFont}"
                                              FontSize="12"
                                              Foreground="{DynamicResource TextSecondaryBrush}"
                                              Margin="0,4,0,0"/>
                                </StackPanel>

                                <CheckBox Grid.Column="1"
                                         VerticalAlignment="Center"
                                         IsChecked="True"/>
                            </Grid>
                        </StackPanel>
                    </Border>

                    <!-- Video Settings -->
                    <Border Style="{DynamicResource CardStyle}">
                        <StackPanel>
                            <TextBlock Text="视频"
                                      FontFamily="{DynamicResource UIFont}"
                                      FontSize="16"
                                      FontWeight="SemiBold"
                                      Foreground="{DynamicResource TextPrimaryBrush}"
                                      Margin="0,0,0,16"/>

                            <Grid Margin="0,0,0,12">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="120"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <TextBlock Grid.Column="0"
                                          Text="分辨率"
                                          FontFamily="{DynamicResource UIFont}"
                                          FontSize="14"
                                          Foreground="{DynamicResource TextPrimaryBrush}"
                                          VerticalAlignment="Center"/>

                                <ComboBox Grid.Column="1"
                                         SelectedIndex="0"
                                         Padding="8,6">
                                    <ComboBoxItem Content="1920x1080"/>
                                    <ComboBoxItem Content="2560x1600"/>
                                    <ComboBoxItem Content="1280x720"/>
                                </ComboBox>
                            </Grid>

                            <Grid Margin="0,0,0,12">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="120"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <TextBlock Grid.Column="0"
                                          Text="帧率"
                                          FontFamily="{DynamicResource UIFont}"
                                          FontSize="14"
                                          Foreground="{DynamicResource TextPrimaryBrush}"
                                          VerticalAlignment="Center"/>

                                <ComboBox Grid.Column="1"
                                         SelectedIndex="1"
                                         Padding="8,6">
                                    <ComboBoxItem Content="30 FPS"/>
                                    <ComboBoxItem Content="60 FPS"/>
                                    <ComboBoxItem Content="120 FPS"/>
                                </ComboBox>
                            </Grid>

                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="120"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <TextBlock Grid.Column="0"
                                          Text="编码器"
                                          FontFamily="{DynamicResource UIFont}"
                                          FontSize="14"
                                          Foreground="{DynamicResource TextPrimaryBrush}"
                                          VerticalAlignment="Center"/>

                                <ComboBox Grid.Column="1"
                                         SelectedIndex="0"
                                         Padding="8,6">
                                    <ComboBoxItem Content="自动选择"/>
                                    <ComboBoxItem Content="NVENC (NVIDIA)"/>
                                    <ComboBoxItem Content="QuickSync (Intel)"/>
                                    <ComboBoxItem Content="FFmpeg (软件)"/>
                                </ComboBox>
                            </Grid>
                        </StackPanel>
                    </Border>

                    <!-- Network Settings -->
                    <Border Style="{DynamicResource CardStyle}">
                        <StackPanel>
                            <TextBlock Text="网络"
                                      FontFamily="{DynamicResource UIFont}"
                                      FontSize="16"
                                      FontWeight="SemiBold"
                                      Foreground="{DynamicResource TextPrimaryBrush}"
                                      Margin="0,0,0,16"/>

                            <Grid Margin="0,0,0,12">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="120"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <TextBlock Grid.Column="0"
                                          Text="连接端口"
                                          FontFamily="{DynamicResource UIFont}"
                                          FontSize="14"
                                          Foreground="{DynamicResource TextPrimaryBrush}"
                                          VerticalAlignment="Center"/>

                                <TextBox Grid.Column="1"
                                        Text="9876"
                                        Padding="8,6"/>
                            </Grid>

                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>

                                <StackPanel Grid.Column="0">
                                    <TextBlock Text="自动重连"
                                              FontFamily="{DynamicResource UIFont}"
                                              FontSize="14"
                                              Foreground="{DynamicResource TextPrimaryBrush}"/>
                                    <TextBlock Text="连接断开时自动尝试重新连接"
                                              FontFamily="{DynamicResource UIFont}"
                                              FontSize="12"
                                              Foreground="{DynamicResource TextSecondaryBrush}"
                                              Margin="0,4,0,0"/>
                                </StackPanel>

                                <CheckBox Grid.Column="1"
                                         VerticalAlignment="Center"
                                         IsChecked="True"/>
                            </Grid>
                        </StackPanel>
                    </Border>

                    <!-- About -->
                    <Border Style="{DynamicResource CardStyle}">
                        <StackPanel>
                            <TextBlock Text="关于"
                                      FontFamily="{DynamicResource UIFont}"
                                      FontSize="16"
                                      FontWeight="SemiBold"
                                      Foreground="{DynamicResource TextPrimaryBrush}"
                                      Margin="0,0,0,16"/>

                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="120"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <TextBlock Grid.Row="0" Grid.Column="0"
                                          Text="版本"
                                          FontFamily="{DynamicResource UIFont}"
                                          FontSize="14"
                                          Foreground="{DynamicResource TextSecondaryBrush}"
                                          Margin="0,0,0,8"/>

                                <TextBlock Grid.Row="0" Grid.Column="1"
                                          Text="1.0.0-beta"
                                          FontFamily="{DynamicResource MonoFont}"
                                          FontSize="14"
                                          Foreground="{DynamicResource TextPrimaryBrush}"
                                          Margin="0,0,0,8"/>

                                <TextBlock Grid.Row="1" Grid.Column="0"
                                          Text="项目"
                                          FontFamily="{DynamicResource UIFont}"
                                          FontSize="14"
                                          Foreground="{DynamicResource TextSecondaryBrush}"/>

                                <TextBlock Grid.Row="1" Grid.Column="1"
                                          FontFamily="{DynamicResource UIFont}"
                                          FontSize="14"
                                          Foreground="{DynamicResource PrimaryBrush}">
                                    <Hyperlink NavigateUri="https://github.com/expandscreen"
                                              Foreground="{DynamicResource PrimaryBrush}"
                                              TextDecorations="None">
                                        ExpandScreen on GitHub
                                    </Hyperlink>
                                </TextBlock>
                            </Grid>
                        </StackPanel>
                    </Border>

                </StackPanel>
            </ScrollViewer>

            <!-- Button Bar -->
            <Border Grid.Row="2"
                    Background="{DynamicResource SurfaceBrush}"
                    BorderBrush="{DynamicResource BorderBrush}"
                    BorderThickness="0,1,0,0"
                    CornerRadius="0,0,12,12"
                    Padding="24,16">
                <StackPanel Orientation="Horizontal"
                           HorizontalAlignment="Right"
                           Spacing="12">
                    <Button Style="{DynamicResource SecondaryButtonStyle}"
                           Content="恢复默认"
                           Click="RestoreDefaults_Click"/>
                    <Button Style="{DynamicResource PrimaryButtonStyle}"
                           Content="保存设置"
                           Click="SaveSettings_Click"/>
                </StackPanel>
            </Border>
        </Grid>
    </Border>
</Window>
